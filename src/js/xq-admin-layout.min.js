/*!
 * xq-admin-layout v1.1.1 (https://xqkeji.cn/demo/xq-adminpage)
 * Author xqkeji.cn
 * LICENSE SSPL-1.0
 * Copyright 2025 xqkeji.cn
 */
 "use strict";(()=>{var e=e=>{if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",e)}else{e()}};var y=(e,t)=>{const n=[];let c=e.parentNode;while(c&&c.nodeType===Node.ELEMENT_NODE&&c.nodeType!==3){if(c.matches(t)){n.push(c)}c=c.parentNode}return n};var m=(e,t)=>{const n=document.createRange().createContextualFragment(t);e.append(n)};var f=(e,t)=>{const n=document.createRange().createContextualFragment(t);e.after(n)};var t="#xq-tab-fullscreen";var n="#xq-tab-left";var c="#xq-tab-right";var v="#xq-tab-nav";var b="#xq-tab-nav-ul";var d="#xq-tab-nav-ul>li>a.active";var r="#xq-tab-contentmenu";var o="#xq-tab-refresh";var s="#xq-tab-close-all";var l="#xq-tab-close-other";var q="#xq-sidebar";var a="#xq-top-nav";var i="mini";var O='[xq-widget="xq-mini-menu"]';var B="#xq-header";var R="#xq-content";var _="#xq-footer";var S="#xq-tab-content";var z="#xq-tab-nav-ul .nav-item .nav-link button.close";var H="#xq-tab-nav-ul .nav-item .nav-link";var j="xq-menu";var L="bg-primary";var p="bg-dark";var u=".xq-logout";var g="bi-chevron-down";var h="bi-chevron-left";var x=()=>{const e=document.querySelectorAll(u);if(e){for(const t of e){t.addEventListener("click",e=>{e.preventDefault();const t=e.currentTarget;const n=t.getAttribute("href");const c="xq-logout-form-"+Math.floor(Math.random()*1e3).toString();const o='<form action="'+n+'" method="post" style="display: none;" id="'+c+'"></form>';m(document.body,o);const r=document.querySelector("#"+c);r.submit()})}}};var k={scrollbarTheme:"os-theme-light",scrollbarAutoHide:"leave"};var E=null;var A=null;var w=()=>{if(typeof OverlayScrollbarsGlobal!=="undefined"){A=OverlayScrollbarsGlobal.OverlayScrollbars;if(!E){E=A(document.querySelector(q),{className:k.scrollbarTheme,sizeAutoCapable:true,scrollbars:{autoHide:k.scrollbarAutoHide,clickScrolling:true}})}}};var G=()=>{if(E){E.destroy();E=null}};var X=()=>{const e=document.querySelector(a);if(e!==null){const l=e.querySelectorAll("li a:not([xq-widget])");for(const t of l){t.addEventListener("click",e=>{e.preventDefault();const t=e.currentTarget;const n=t.getAttribute("href");const c=document.querySelector(n);if(c?.classList.contains("d-none")){for(const o of l){if(o!==t){if(!o.classList.contains("bg-dark")){o.classList.add("bg-dark")}if(o.classList.contains("bg-primary")){o.classList.remove("bg-primary")}const r=o.getAttribute("href");const s=document.querySelector(r);if(!s?.classList.contains("d-none")){s?.classList.add("d-none")}}else{if(o.classList.contains("bg-dark")){o.classList.remove("bg-dark")}if(!o.classList.contains("bg-primary")){o.classList.add("bg-primary")}const r=o.getAttribute("href");const s=document.querySelector(r);if(s?.classList.contains("d-none")){s?.classList.remove("d-none")}}}}})}}};var Y=()=>{const e=document.querySelector(O);if(e){e.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(B);if(t){if(t.classList.contains(i)){t.classList.remove(i)}else{t.classList.add(i)}}const n=document.querySelector(q);if(n){if(n.classList.contains(i)){n.classList.remove(i);w()}else{n.classList.add(i);G()}}const c=document.querySelector(R);if(c){if(c.classList.contains(i)){c.classList.remove(i)}else{c.classList.add(i)}}const o=document.querySelector(_);if(o){if(o.classList.contains(i)){o.classList.remove(i)}else{o.classList.add(i)}}})}};var J=e=>{let t=null;const n=document.querySelector(b);const c=n.querySelectorAll("li");for(const o of c){if(o===e){break}t=o}return t};var N=e=>{const t=document.querySelector(b);const n=document.querySelector(S);const c=t.querySelector("li > a#"+e+"-tab");if(c===null){return}const o=t.querySelector("li > a.active");if(o){o.classList.remove("active")}if(c){c.classList.add("active")}const r=n.querySelector("div.active");if(r){r.classList.remove("active")}const s=n.querySelector("#"+e+"-tab-content");if(s){s.classList.add("active")}K(e)};var K=t=>{const e=document.querySelector(v);const n=document.querySelector(b);const c=n.querySelector("li:first-child");const o=Number.isNaN(Number.parseInt(c.style.marginLeft,10))?0:Number.parseInt(c.style.marginLeft,10);const r=Math.abs(o);const s=n.clientWidth+r;const l=e.clientWidth;let a=0;if(s>l){const i=n.querySelector("#"+t+"-tab");const u=n.querySelectorAll("li>a");let e=0;for(const d of u){e+=d.clientWidth;if(d===i){break}}if(o+e>l){a=l-e;c.style.marginLeft=a<0?a.toString()+"px":"0px"}}else{c.style.marginLeft="0px"}};var P=()=>{const e=document.querySelectorAll(z);for(const t of e){D(t)}};var D=e=>{e.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(S);const n=e.currentTarget;const c=n.parentNode;const o=c.getAttribute("id");const r=o.replace("-tab","");const s=c?.parentNode;if(c.classList.contains("active")){const l=J(s);const a=l.querySelector("a");const i=a.getAttribute("id");const u=i.replace("-tab","");s.remove();t.querySelector("#"+r+"-tab-content")?.remove();N(u)}else{s.remove();t.querySelector("#"+r+"-tab-content")?.remove();N(r)}})};var Q=()=>{const e=document.querySelectorAll(H);for(const t of e){const n=t.getAttribute("id");if(n!==null){T(n.replace("-tab",""))}}};var T=e=>{const t=document.querySelector(b);const n=t.querySelector("li > a#"+e+"-tab");if(n){n.addEventListener("click",e=>{const t=e.currentTarget;const n=t.getAttribute("id");N(n.replace("-tab",""))})}};var F=e=>{if(e){const t=document.querySelector(b);const n=t.querySelectorAll("li a button.close");for(const l of n){l.click()}const c=t.querySelector("li:first-child");const o=c.querySelector("a");o?.classList.add("acitve");const r=o?.getAttribute("data-bs-target");const s=document.querySelector(r);if(s){s?.classList.add("acitve")}if(c){c.style.marginLeft="0px"}}else{const t=document.querySelector(b);const n=t.querySelectorAll("li a:not(.active)");for(const l of n){const u=l.querySelector("button.close");u.click()}const a=document.querySelector(d);a.classList.add("acitve");const i=a?.getAttribute("data-bs-target");const s=document.querySelector(i);const c=t.querySelector("li:first-child");if(s){s?.classList.add("acitve")}if(c){c.style.marginLeft="0px"}}};var U=null;var W=e=>{e.addEventListener("contextmenu",e=>{e.preventDefault();const t=e.currentTarget;U=t;const n=e.pageY;const c=e.pageX;const o=document.querySelector(r);o.style.top=n+"px";o.style.left=c+"px";o.style.display="block"})};var V=()=>{const e=document.querySelector(b);if(e!==null){const t=e.querySelectorAll("li>a");for(const n of t){W(n)}}};var Z=e=>{const t=e.currentTarget;let n=document.querySelector(r);if(n===null){n=window.parent.document.querySelector(r)}if(n&&!n.contains(t)){n.style.display="none"}};var $=()=>{const e=document.querySelector(o);const t=document.querySelector(s);const n=document.querySelector(l);if(e!==null){e.addEventListener("click",e=>{e.preventDefault();const t=document.querySelector(d);const n=t.getAttribute("data-bs-target");if(n!==null){const c=document.querySelector(n);if(c!==null){const o=c.querySelector("iframe");if(o!==null){o.contentWindow?.location.reload()}}}})}if(t!==null){t.addEventListener("click",e=>{e.preventDefault();F(true)})}if(n){n.addEventListener("click",e=>{e.preventDefault();F(false)})}};var I=(t,n,c)=>{let e=false;const o=document.querySelector(b);const r=document.querySelector(S);const s=o.querySelector("li > a#"+t+"-tab");if(s===null){let e='<li class="nav-item" role="presentation"><a class="nav-link" id="'+t+'-tab" data-bs-toggle="tab" data-bs-target="#'+t+'-tab-content" type="button" role="tab" aria-controls="'+t+'-tab-content" aria-selected="false">'+n+'<button type="button" class="close" aria-label="关闭"><span aria-hidden="true">&times;</span></button></a></li>';m(o,e);e='<div class="tab-pane" id="'+t+'-tab-content" role="tabpanel" aria-labelledby="'+t+'-tab" ><iframe src="'+c+'" width="100%" frameborder="no" border="0" marginwidth="0" marginheight="0" ></iframe></div>';m(r,e);T(t);N(t);const l=document.querySelector("#"+t+"-tab");W(l);const a=l.querySelector("button.close");D(a)}else{e=true}if(e){const i=s.getAttribute("aria-controls");const u=document.querySelector(i);if(u!==null){const d=u.querySelector("iframe");if(d!==null){d.contentWindow?.location.reload()}}N(i.replace("-tab-content",""))}};var C=e=>{for(const t of e){if(!t.classList.contains(j)){t.addEventListener("click",e=>{e.preventDefault();const t=e.currentTarget;const n=document.querySelectorAll(q+" nav");for(const i of n){const u=i.querySelectorAll("a."+L);if(u!==null){for(const d of u){const m=d.classList;m.remove(L);m.add(p)}}}const c=t.getAttribute("href");const o=t.getAttribute("id");const r=t.querySelector("p")?.textContent;I(o,r,c);const s=t.classList;s.remove(p);s.add(L);const l=y(t,q+" nav>ul>li")[0];const a=t.parentElement;if(l!==a){const f=l.querySelector("a");if(f){const v=f.classList;v.remove(p);v.add(L)}}if(window.innerWidth<768){const b=document.getElementById("sidebar-backdrop");b?.click()}})}else{t.addEventListener("click",e=>{e.preventDefault();const u=e.currentTarget;const d=u.querySelector("i.xq-menu-expand");if(d!==null){const t=u.parentNode;if(d.classList.contains(h)){const n=t.querySelector("ul");if(n!==null){d.classList.remove(h);d.classList.add(g);if(n.classList.contains("d-none")){n.classList.remove("d-none")}n.classList.add("d-block")}else{let e;e=u.getAttribute("href");if(e!==null){fetch(e).then(async e=>{return e.json()}).then(e=>{let t;t="<ul>";for(const o of e){const r=o.url;const s=o.id;const l=o.name;const a=o.has_submenu;if(a){t+='<li class="nav-item"><a href="'+r+'" class="nav-link xq-menu" id="t_'+s+'">';t+='<i class="nav-icon bi bi-circle"></i><p>'+l+'</p><span class="float-end"><i class="bi xq-menu-expand '+h+'"></i></span>';t+="</a></li>"}else{t+='<li class="nav-item"><a href="'+r+'" class="nav-link" id="t_'+s+'">';t+='<i class="nav-icon bi bi-record-circle"></i><p>'+l+"</p>";t+="</a></li>"}}t+="</ul>";f(u,t);const n=u.parentNode;const c=n.querySelector("ul");d.classList.remove(h);d.classList.add(g);if(c!==null){if(c.classList.contains("d-none")){c.classList.remove("d-none")}c.classList.add("d-block");const i=c.querySelectorAll("a");C(i)}}).catch(()=>{console.log("url:"+e+",fetch error")})}}}else if(t!==null){const n=t.querySelector("ul");if(n!==null){if(n.classList.contains("d-block")){n.classList.remove("d-block")}n.classList.add("d-none");if(d.classList.contains(g)){d.classList.remove(g)}d.classList.add(h)}}}})}}};var ee=()=>{P();Q();const e=document.querySelectorAll(q+" a:not("+u+")");C(e);x()};var te=()=>{const e=document.fullscreenElement??document.msFullscreenElement??document.mozFullScreenElement??document.webkitFullscreenElement??false;if(!e){const t=document.documentElement;const n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(n){n.call(t)}}else{const c=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen;if(c){c.call(document)}}};var ne=()=>{const e=document.querySelector(t);if(e!==null){e.addEventListener("click",e=>{e.preventDefault();te()})}};var M=()=>{const e=document.querySelector(b);const t=e.querySelector(".active");return t};var ce=()=>{const e=document.querySelector(v);const t=document.querySelector(b);const n=t.querySelector("li:first-child");const c=Math.abs(Number.parseInt(n.style.marginLeft,10));const o=Number.isNaN(c)?0:c;const r=t.clientWidth+o;const s=e.clientWidth;let l=0;if(r>s){const a=M();const i=t.querySelectorAll("li>a");let e=0;for(const d of i){if(d===a){break}e+=d.clientWidth}const u=r-s;l=e>u?u:e;n.style.marginLeft=(-l).toString()+"px"}else{n.style.marginLeft="0px"}};var oe=()=>{const e=document.querySelector(v);const t=document.querySelector(b);const n=t.querySelector("li:first-child");const c=Number.isNaN(Number.parseInt(n.style.marginLeft,10))?0:Number.parseInt(n.style.marginLeft,10);const o=Math.abs(c);const r=t.clientWidth+o;const s=e.clientWidth;let l=0;if(r>s){const a=M();const i=t.querySelectorAll("li>a");let e=0;for(const u of i){e+=u.clientWidth;if(u===a){break}}if(c<0){l=s-e;n.style.marginLeft=l<0?l.toString()+"px":"0px"}}else{n.style.marginLeft="0px"}};var re=()=>{const e=document.querySelector(n);if(e!==null){e.addEventListener("click",e=>{e.preventDefault();ce()})}};var se=()=>{const e=document.querySelector(c);if(e!==null){e.addEventListener("click",e=>{e.preventDefault();oe()})}};var le=()=>{ne();re();se();V();const{body:e}=document;e.addEventListener("click",e=>{Z(e)});$()};var ae=()=>{window.addEventListener("message",e=>{const t=e.data;const n=t.callback;const c=t.params;if(Object.hasOwn(window,n)){const o=window[n];o.apply(null,c)}})};var ie=()=>{const e=document.getElementById("mobile-menu-toggle");const t=document.querySelector(q);const n=document.getElementById("sidebar-backdrop");if(e&&t&&n){e.addEventListener("click",()=>{t.classList.toggle("show");n.classList.toggle("show")});n.addEventListener("click",()=>{t.classList.remove("show");n.classList.remove("show")})}};var ue=()=>{const s=document.querySelectorAll("#mobile-module-dropdown + .dropdown-menu .dropdown-item");const l=document.getElementById("mobile-module-dropdown");if(s&&l){s.forEach(r=>{r.addEventListener("click",e=>{e.preventDefault();const t=r.getAttribute("href");l.textContent=r.textContent?.trim();s.forEach(e=>e.classList.remove("active"));r.classList.add("active");const n=document.querySelectorAll('#xq-top-nav a[href="'+t+'"]');if(n.length>0){n[0].click()}const c=document.querySelector(q);const o=document.getElementById("sidebar-backdrop");if(c&&o){c.classList.remove("show");o.classList.remove("show")}})})}};var de=()=>{ie();ue()};var me=()=>{x();w();X();Y();ee();le();ae();de()};e(()=>{me()});window.xqAddTab=I})();